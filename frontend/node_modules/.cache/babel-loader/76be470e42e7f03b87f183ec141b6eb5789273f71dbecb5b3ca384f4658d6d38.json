{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ayoub\\\\Desktop\\\\Projects\\\\e-commerce\\\\frontend\\\\src\\\\pages\\\\Checkout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { toast } from \"react-toastify\";\nimport Layout from \"../components/layout/Layout\";\nimport { getCart } from \"../features/cart/cartSlice\";\nimport { createOrder, createPaymentIntent, confirmPayment } from \"../features/orders/orderSlice\";\nimport { clearCart } from \"../features/cart/cartSlice\";\nimport CheckoutForm from \"../components/checkout/CheckoutForm\";\nimport OrderSummary from \"../components/checkout/OrderSummary\";\nimport PaymentForm from \"../components/checkout/PaymentForm\";\nimport OrderConfirmation from \"../components/checkout/OrderConfirmation\";\n\n// Load Stripe (use test publishable key)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY || \"pk_test_your_stripe_publishable_key_here\");\nconst Checkout = () => {\n  _s();\n  var _user$name, _user$name2;\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useSelector(state => state.auth);\n  const {\n    items,\n    subtotal,\n    shippingCost,\n    discount,\n    total,\n    isLoading\n  } = useSelector(state => state.cart);\n  const {\n    order,\n    isLoading: orderLoading\n  } = useSelector(state => state.orders);\n  const [step, setStep] = useState(1);\n  const [shippingData, setShippingData] = useState({\n    firstName: (user === null || user === void 0 ? void 0 : (_user$name = user.name) === null || _user$name === void 0 ? void 0 : _user$name.split(\" \")[0]) || \"\",\n    lastName: (user === null || user === void 0 ? void 0 : (_user$name2 = user.name) === null || _user$name2 === void 0 ? void 0 : _user$name2.split(\" \").slice(1).join(\" \")) || \"\",\n    email: (user === null || user === void 0 ? void 0 : user.email) || \"\",\n    phone: \"\",\n    address: \"\",\n    city: \"\",\n    state: \"\",\n    zipCode: \"\",\n    country: \"US\",\n    notes: \"\"\n  });\n  const [paymentMethod, setPaymentMethod] = useState(\"card\");\n  const [clientSecret, setClientSecret] = useState(\"\");\n  const [orderId, setOrderId] = useState(null);\n  useEffect(() => {\n    if (!user) {\n      navigate(\"/login\");\n      return;\n    }\n    if (items.length === 0) {\n      navigate(\"/cart\");\n      return;\n    }\n    dispatch(getCart());\n  }, [dispatch, user, navigate, items.length]);\n  const handleShippingSubmit = data => {\n    setShippingData(data);\n    setStep(2);\n  };\n  const handlePaymentMethodSelect = method => {\n    setPaymentMethod(method);\n  };\n  const handleCreateOrder = async () => {\n    try {\n      // Map frontend payment method to backend expected value\n      const backendPaymentMethod = paymentMethod === \"card\" ? \"stripe\" : paymentMethod;\n      const orderData = {\n        shippingAddress: shippingData,\n        paymentMethod: backendPaymentMethod,\n        notes: shippingData.notes\n      };\n      const result = await dispatch(createOrder(orderData)).unwrap();\n      setOrderId(result.id);\n\n      // Create payment intent\n      const paymentResult = await dispatch(createPaymentIntent(result.id)).unwrap();\n      setClientSecret(paymentResult.clientSecret);\n      setStep(3);\n    } catch (error) {\n      toast.error(error || \"Failed to create order\");\n    }\n  };\n  const handlePaymentSuccess = async paymentIntentId => {\n    try {\n      await dispatch(confirmPayment({\n        orderId,\n        paymentIntentId\n      })).unwrap();\n      await dispatch(clearCart());\n      setStep(4);\n      toast.success(\"Order placed successfully!\");\n    } catch (error) {\n      toast.error(error || \"Payment confirmation failed\");\n    }\n  };\n  const handleBackToShop = () => {\n    navigate(\"/products\");\n  };\n  if (isLoading || orderLoading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center items-center h-64\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center space-x-4\",\n          children: [1, 2, 3, 4].map(stepNumber => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${step >= stepNumber ? \"bg-blue-600 text-white\" : \"bg-gray-200 text-gray-600\"}`,\n              children: stepNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this), stepNumber < 4 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-16 h-0.5 mx-2 ${step > stepNumber ? \"bg-blue-600\" : \"bg-gray-200\"}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 19\n            }, this)]\n          }, stepNumber, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center mt-2 space-x-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-sm ${step >= 1 ? \"text-blue-600\" : \"text-gray-500\"}`,\n            children: \"Shipping\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-sm ${step >= 2 ? \"text-blue-600\" : \"text-gray-500\"}`,\n            children: \"Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-sm ${step >= 3 ? \"text-blue-600\" : \"text-gray-500\"}`,\n            children: \"Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-sm ${step >= 4 ? \"text-blue-600\" : \"text-gray-500\"}`,\n            children: \"Complete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: [step === 1 && /*#__PURE__*/_jsxDEV(CheckoutForm, {\n            initialData: shippingData,\n            onSubmit: handleShippingSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this), step === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white dark:bg-gray-800 rounded-lg shadow p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-gray-900 dark:text-white mb-6\",\n              children: \"Payment Method\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  id: \"card\",\n                  name: \"paymentMethod\",\n                  value: \"card\",\n                  checked: paymentMethod === \"card\",\n                  onChange: () => handlePaymentMethodSelect(\"card\"),\n                  className: \"w-4 h-4 text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"card\",\n                  className: \"text-gray-700 dark:text-gray-300\",\n                  children: \"Credit/Debit Card\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  id: \"paypal\",\n                  name: \"paymentMethod\",\n                  value: \"paypal\",\n                  checked: paymentMethod === \"paypal\",\n                  onChange: () => handlePaymentMethodSelect(\"paypal\"),\n                  className: \"w-4 h-4 text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"paypal\",\n                  className: \"text-gray-700 dark:text-gray-300\",\n                  children: \"PayPal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 flex space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setStep(1),\n                className: \"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\",\n                children: \"Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleCreateOrder,\n                className: \"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",\n                children: \"Continue to Payment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), step === 3 && clientSecret && /*#__PURE__*/_jsxDEV(Elements, {\n            stripe: stripePromise,\n            options: {\n              clientSecret\n            },\n            children: /*#__PURE__*/_jsxDEV(PaymentForm, {\n              onSuccess: handlePaymentSuccess,\n              onBack: () => setStep(2),\n              clientSecret: clientSecret\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), step === 4 && order && /*#__PURE__*/_jsxDEV(OrderConfirmation, {\n            order: order,\n            onBackToShop: handleBackToShop\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(OrderSummary, {\n            items: items,\n            subtotal: subtotal,\n            shippingCost: shippingCost,\n            discount: discount,\n            total: total,\n            step: step\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(Checkout, \"bGYpl7EoW5qY0yoNH4J+6JYA9ps=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector, useSelector];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","useNavigate","Elements","loadStripe","toast","Layout","getCart","createOrder","createPaymentIntent","confirmPayment","clearCart","CheckoutForm","OrderSummary","PaymentForm","OrderConfirmation","jsxDEV","_jsxDEV","stripePromise","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","Checkout","_s","_user$name","_user$name2","dispatch","navigate","user","state","auth","items","subtotal","shippingCost","discount","total","isLoading","cart","order","orderLoading","orders","step","setStep","shippingData","setShippingData","firstName","name","split","lastName","slice","join","email","phone","address","city","zipCode","country","notes","paymentMethod","setPaymentMethod","clientSecret","setClientSecret","orderId","setOrderId","length","handleShippingSubmit","data","handlePaymentMethodSelect","method","handleCreateOrder","backendPaymentMethod","orderData","shippingAddress","result","unwrap","id","paymentResult","error","handlePaymentSuccess","paymentIntentId","success","handleBackToShop","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","stepNumber","initialData","onSubmit","type","value","checked","onChange","htmlFor","onClick","stripe","options","onSuccess","onBack","onBackToShop","_c","$RefreshReg$"],"sources":["C:/Users/Ayoub/Desktop/Projects/e-commerce/frontend/src/pages/Checkout.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { toast } from \"react-toastify\";\r\nimport Layout from \"../components/layout/Layout\";\r\nimport { getCart } from \"../features/cart/cartSlice\";\r\nimport {\r\n  createOrder,\r\n  createPaymentIntent,\r\n  confirmPayment,\r\n} from \"../features/orders/orderSlice\";\r\nimport { clearCart } from \"../features/cart/cartSlice\";\r\nimport CheckoutForm from \"../components/checkout/CheckoutForm\";\r\nimport OrderSummary from \"../components/checkout/OrderSummary\";\r\nimport PaymentForm from \"../components/checkout/PaymentForm\";\r\nimport OrderConfirmation from \"../components/checkout/OrderConfirmation\";\r\n\r\n// Load Stripe (use test publishable key)\r\nconst stripePromise = loadStripe(\r\n  process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY ||\r\n    \"pk_test_your_stripe_publishable_key_here\"\r\n);\r\n\r\nconst Checkout = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const { user } = useSelector((state) => state.auth);\r\n  const { items, subtotal, shippingCost, discount, total, isLoading } =\r\n    useSelector((state) => state.cart);\r\n  const { order, isLoading: orderLoading } = useSelector(\r\n    (state) => state.orders\r\n  );\r\n\r\n  const [step, setStep] = useState(1);\r\n  const [shippingData, setShippingData] = useState({\r\n    firstName: user?.name?.split(\" \")[0] || \"\",\r\n    lastName: user?.name?.split(\" \").slice(1).join(\" \") || \"\",\r\n    email: user?.email || \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    city: \"\",\r\n    state: \"\",\r\n    zipCode: \"\",\r\n    country: \"US\",\r\n    notes: \"\",\r\n  });\r\n  const [paymentMethod, setPaymentMethod] = useState(\"card\");\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const [orderId, setOrderId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    if (items.length === 0) {\r\n      navigate(\"/cart\");\r\n      return;\r\n    }\r\n\r\n    dispatch(getCart());\r\n  }, [dispatch, user, navigate, items.length]);\r\n\r\n  const handleShippingSubmit = (data) => {\r\n    setShippingData(data);\r\n    setStep(2);\r\n  };\r\n\r\n  const handlePaymentMethodSelect = (method) => {\r\n    setPaymentMethod(method);\r\n  };\r\n\r\n  const handleCreateOrder = async () => {\r\n    try {\r\n      // Map frontend payment method to backend expected value\r\n      const backendPaymentMethod =\r\n        paymentMethod === \"card\" ? \"stripe\" : paymentMethod;\r\n      const orderData = {\r\n        shippingAddress: shippingData,\r\n        paymentMethod: backendPaymentMethod,\r\n        notes: shippingData.notes,\r\n      };\r\n\r\n      const result = await dispatch(createOrder(orderData)).unwrap();\r\n      setOrderId(result.id);\r\n\r\n      // Create payment intent\r\n      const paymentResult = await dispatch(\r\n        createPaymentIntent(result.id)\r\n      ).unwrap();\r\n      setClientSecret(paymentResult.clientSecret);\r\n\r\n      setStep(3);\r\n    } catch (error) {\r\n      toast.error(error || \"Failed to create order\");\r\n    }\r\n  };\r\n\r\n  const handlePaymentSuccess = async (paymentIntentId) => {\r\n    try {\r\n      await dispatch(confirmPayment({ orderId, paymentIntentId })).unwrap();\r\n      await dispatch(clearCart());\r\n      setStep(4);\r\n      toast.success(\"Order placed successfully!\");\r\n    } catch (error) {\r\n      toast.error(error || \"Payment confirmation failed\");\r\n    }\r\n  };\r\n\r\n  const handleBackToShop = () => {\r\n    navigate(\"/products\");\r\n  };\r\n\r\n  if (isLoading || orderLoading) {\r\n    return (\r\n      <Layout>\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"flex justify-center items-center h-64\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Progress Steps */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-center space-x-4\">\r\n            {[1, 2, 3, 4].map((stepNumber) => (\r\n              <div key={stepNumber} className=\"flex items-center\">\r\n                <div\r\n                  className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\r\n                    step >= stepNumber\r\n                      ? \"bg-blue-600 text-white\"\r\n                      : \"bg-gray-200 text-gray-600\"\r\n                  }`}>\r\n                  {stepNumber}\r\n                </div>\r\n                {stepNumber < 4 && (\r\n                  <div\r\n                    className={`w-16 h-0.5 mx-2 ${\r\n                      step > stepNumber ? \"bg-blue-600\" : \"bg-gray-200\"\r\n                    }`}></div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex justify-center mt-2 space-x-16\">\r\n            <span\r\n              className={`text-sm ${\r\n                step >= 1 ? \"text-blue-600\" : \"text-gray-500\"\r\n              }`}>\r\n              Shipping\r\n            </span>\r\n            <span\r\n              className={`text-sm ${\r\n                step >= 2 ? \"text-blue-600\" : \"text-gray-500\"\r\n              }`}>\r\n              Payment\r\n            </span>\r\n            <span\r\n              className={`text-sm ${\r\n                step >= 3 ? \"text-blue-600\" : \"text-gray-500\"\r\n              }`}>\r\n              Review\r\n            </span>\r\n            <span\r\n              className={`text-sm ${\r\n                step >= 4 ? \"text-blue-600\" : \"text-gray-500\"\r\n              }`}>\r\n              Complete\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-2\">\r\n            {step === 1 && (\r\n              <CheckoutForm\r\n                initialData={shippingData}\r\n                onSubmit={handleShippingSubmit}\r\n              />\r\n            )}\r\n\r\n            {step === 2 && (\r\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-6\">\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">\r\n                  Payment Method\r\n                </h2>\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      id=\"card\"\r\n                      name=\"paymentMethod\"\r\n                      value=\"card\"\r\n                      checked={paymentMethod === \"card\"}\r\n                      onChange={() => handlePaymentMethodSelect(\"card\")}\r\n                      className=\"w-4 h-4 text-blue-600\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"card\"\r\n                      className=\"text-gray-700 dark:text-gray-300\">\r\n                      Credit/Debit Card\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      id=\"paypal\"\r\n                      name=\"paymentMethod\"\r\n                      value=\"paypal\"\r\n                      checked={paymentMethod === \"paypal\"}\r\n                      onChange={() => handlePaymentMethodSelect(\"paypal\")}\r\n                      className=\"w-4 h-4 text-blue-600\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"paypal\"\r\n                      className=\"text-gray-700 dark:text-gray-300\">\r\n                      PayPal\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-6 flex space-x-4\">\r\n                  <button\r\n                    onClick={() => setStep(1)}\r\n                    className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">\r\n                    Back\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCreateOrder}\r\n                    className=\"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\">\r\n                    Continue to Payment\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {step === 3 && clientSecret && (\r\n              <Elements stripe={stripePromise} options={{ clientSecret }}>\r\n                <PaymentForm\r\n                  onSuccess={handlePaymentSuccess}\r\n                  onBack={() => setStep(2)}\r\n                  clientSecret={clientSecret}\r\n                />\r\n              </Elements>\r\n            )}\r\n\r\n            {step === 4 && order && (\r\n              <OrderConfirmation\r\n                order={order}\r\n                onBackToShop={handleBackToShop}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* Order Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <OrderSummary\r\n              items={items}\r\n              subtotal={subtotal}\r\n              shippingCost={shippingCost}\r\n              discount={discount}\r\n              total={total}\r\n              step={step}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}