{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\n\n// Load recently viewed products from localStorage\nconst loadRecentlyViewed = () => {\n  try {\n    const stored = localStorage.getItem(\"recentlyViewed\");\n    return stored ? JSON.parse(stored) : [];\n  } catch (error) {\n    console.error(\"Error loading recently viewed products:\", error);\n    return [];\n  }\n};\n\n// Save recently viewed products to localStorage\nconst saveRecentlyViewed = products => {\n  try {\n    localStorage.setItem(\"recentlyViewed\", JSON.stringify(products));\n  } catch (error) {\n    console.error(\"Error saving recently viewed products:\", error);\n  }\n};\nconst initialState = {\n  recentlyViewed: loadRecentlyViewed(),\n  maxItems: 20\n};\nconst recentlyViewedSlice = createSlice({\n  name: \"recentlyViewed\",\n  initialState,\n  reducers: {\n    addToRecentlyViewed: (state, action) => {\n      const product = action.payload;\n\n      // Remove if already exists (to move to front)\n      state.recentlyViewed = state.recentlyViewed.filter(item => item.id !== product.id);\n\n      // Add to beginning\n      state.recentlyViewed.unshift(product);\n\n      // Keep only max items\n      if (state.recentlyViewed.length > state.maxItems) {\n        state.recentlyViewed = state.recentlyViewed.slice(0, state.maxItems);\n      }\n\n      // Save to localStorage\n      saveRecentlyViewed(state.recentlyViewed);\n    },\n    removeFromRecentlyViewed: (state, action) => {\n      const productId = action.payload;\n      state.recentlyViewed = state.recentlyViewed.filter(item => item.id !== productId);\n      saveRecentlyViewed(state.recentlyViewed);\n    },\n    clearRecentlyViewed: state => {\n      state.recentlyViewed = [];\n      localStorage.removeItem(\"recentlyViewed\");\n    },\n    setMaxItems: (state, action) => {\n      state.maxItems = action.payload;\n      // Trim existing items if needed\n      if (state.recentlyViewed.length > state.maxItems) {\n        state.recentlyViewed = state.recentlyViewed.slice(0, state.maxItems);\n        saveRecentlyViewed(state.recentlyViewed);\n      }\n    }\n  }\n});\nexport const {\n  addToRecentlyViewed,\n  removeFromRecentlyViewed,\n  clearRecentlyViewed,\n  setMaxItems\n} = recentlyViewedSlice.actions;\nexport default recentlyViewedSlice.reducer;","map":{"version":3,"names":["createSlice","loadRecentlyViewed","stored","localStorage","getItem","JSON","parse","error","console","saveRecentlyViewed","products","setItem","stringify","initialState","recentlyViewed","maxItems","recentlyViewedSlice","name","reducers","addToRecentlyViewed","state","action","product","payload","filter","item","id","unshift","length","slice","removeFromRecentlyViewed","productId","clearRecentlyViewed","removeItem","setMaxItems","actions","reducer"],"sources":["C:/Users/Ayoub/Desktop/Projects/e-commerce/frontend/src/features/recentlyViewed/recentlyViewedSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\n// Load recently viewed products from localStorage\r\nconst loadRecentlyViewed = () => {\r\n  try {\r\n    const stored = localStorage.getItem(\"recentlyViewed\");\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    console.error(\"Error loading recently viewed products:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Save recently viewed products to localStorage\r\nconst saveRecentlyViewed = (products) => {\r\n  try {\r\n    localStorage.setItem(\"recentlyViewed\", JSON.stringify(products));\r\n  } catch (error) {\r\n    console.error(\"Error saving recently viewed products:\", error);\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  recentlyViewed: loadRecentlyViewed(),\r\n  maxItems: 20,\r\n};\r\n\r\nconst recentlyViewedSlice = createSlice({\r\n  name: \"recentlyViewed\",\r\n  initialState,\r\n  reducers: {\r\n    addToRecentlyViewed: (state, action) => {\r\n      const product = action.payload;\r\n\r\n      // Remove if already exists (to move to front)\r\n      state.recentlyViewed = state.recentlyViewed.filter(\r\n        (item) => item.id !== product.id\r\n      );\r\n\r\n      // Add to beginning\r\n      state.recentlyViewed.unshift(product);\r\n\r\n      // Keep only max items\r\n      if (state.recentlyViewed.length > state.maxItems) {\r\n        state.recentlyViewed = state.recentlyViewed.slice(0, state.maxItems);\r\n      }\r\n\r\n      // Save to localStorage\r\n      saveRecentlyViewed(state.recentlyViewed);\r\n    },\r\n    removeFromRecentlyViewed: (state, action) => {\r\n      const productId = action.payload;\r\n      state.recentlyViewed = state.recentlyViewed.filter(\r\n        (item) => item.id !== productId\r\n      );\r\n      saveRecentlyViewed(state.recentlyViewed);\r\n    },\r\n    clearRecentlyViewed: (state) => {\r\n      state.recentlyViewed = [];\r\n      localStorage.removeItem(\"recentlyViewed\");\r\n    },\r\n    setMaxItems: (state, action) => {\r\n      state.maxItems = action.payload;\r\n      // Trim existing items if needed\r\n      if (state.recentlyViewed.length > state.maxItems) {\r\n        state.recentlyViewed = state.recentlyViewed.slice(0, state.maxItems);\r\n        saveRecentlyViewed(state.recentlyViewed);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  addToRecentlyViewed,\r\n  removeFromRecentlyViewed,\r\n  clearRecentlyViewed,\r\n  setMaxItems,\r\n} = recentlyViewedSlice.actions;\r\n\r\nexport default recentlyViewedSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}